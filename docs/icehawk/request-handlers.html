<!doctype html>
<html lang="en">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<title>IceHawk handlers | IceHawk | PHP micro-framework respecting CQRS</title>
	<meta name="description" content="IceHawk request handlers - components documentation">
	<meta name="keywords" content="IceHawk, request, handler, documentation">
	<meta name="HandheldFriendly" content="True"/>
	<meta name="geo.region" content="DE-SN"/>
	<meta name="geo.placename" content="Dresden"/>
	<meta name="geo.position" content="51.052088;13.741672"/>
	<meta name="ICBM" content="51.052088, 13.741672"/>
	<meta name="twitter:site" content="https://twitter.com/hollodotme">
	<meta name="twitter:creator" content="@hollodotme">
	<script type="application/ld+json">{
  "@context" : "http://schema.org",
  "@type": "Person",
  "name": "IceHawk framework",
  "image": "https://icehawk.github.io/images/logo_121x100.png",
  "url": "https://icehawk.github.io",
  "sameAs" : [
      "https://twitter.com/hollodotme",
      "https://www.xing.com/profile/Holger_Woltersdorf",
      "https://github.com/icehawk"
    ]
  }
}</script>
	<meta property="article:author" content="https://www.xing.com/profile/Holger_Woltersdorf"/>
	<meta property="article:publisher" content="https://www.xing.com/profile/Holger_Woltersdorf"/>
	<link rel="apple-touch-icon" sizes="57x57" href="https://icehawk.github.io/images/favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="https://icehawk.github.io/images/favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="https://icehawk.github.io/images/favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="https://icehawk.github.io/images/favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="https://icehawk.github.io/images/favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://icehawk.github.io/images/favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="https://icehawk.github.io/images/favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://icehawk.github.io/images/favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="https://icehawk.github.io/images/favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192" href="https://icehawk.github.io/images/favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="https://icehawk.github.io/images/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="https://icehawk.github.io/images/favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://icehawk.github.io/images/favicon/favicon-16x16.png">
	<link rel="manifest" href="https://icehawk.github.io/images/favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="https://icehawk.github.io/images/favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	<link rel="canonical" href="https://icehawk.github.io/docs/icehawk/request-handlers.html"/>
	<meta name="referrer" content="origin"/>

	<meta property="og:site_name" content="IceHawk | PHP micro-framework respecting CQRS"/>
	<meta property="og:type" content="article"/>
	<meta property="og:title" content="IceHawk handlers | IceHawk | PHP micro-framework respecting CQRS"/>
	<meta property="og:description" content="IceHawk request handlers - components documentation"/>
	<meta property="og:url" content="https://icehawk.github.io/docs/icehawk/request-handlers.html"/>
	<meta property="og:image" content="https://icehawk.github.io/images/logo_121x100.png"/>
	<meta property="article:published_time" content="2016-11-14T22:01:37+01:00"/>
	<meta property="article:modified_time" content="2016-11-14T22:01:37+01:00"/>
			<meta property="article:tag" content="IceHawk"/>
			<meta property="article:tag" content="request"/>
			<meta property="article:tag" content="handler"/>
			<meta property="article:tag" content="documentation"/>
		<meta name="twitter:card" content="summary_large_image"/>
	<meta name="twitter:title" content="IceHawk handlers | IceHawk | PHP micro-framework respecting CQRS"/>
	<meta name="twitter:description" content="IceHawk request handlers - components documentation"/>
	<meta name="twitter:url" content="https://icehawk.github.io/docs/icehawk/request-handlers.html"/>
	<meta name="twitter:image:src" content="https://icehawk.github.io/images/logo_121x100.png"/>

	<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "IceHawk framework",
    "author": {
        "@type": "Person",
        "name": "Holger Woltersdorf",
        "image": "https://icehawk.github.io/images/hwoltersdorf.png",
        "url": "https://github.com/hollodotme",
        "sameAs": "https://twitter.com/hollodotme",
        "description": "CIO at Fortuneglobe GmbH, Head of Fortune Solutions, Husband, Father, PHP Dev with heart, board member of PHP USERGROUP DRESDEN e.V."
    },
    "headline": "IceHawk handlers | IceHawk | PHP micro-framework respecting CQRS",
    "url": "https://icehawk.github.io/docs/icehawk/request-handlers.html",
    "datePublished": "2016-11-14T22:01:37+01:00",
    "dateModified": "2016-11-14T22:01:37+01:00",
    "image": "https://icehawk.github.io/images/logo_121x100.png",
    "keywords": "IceHawk, request, handler, documentation",
    "description": "IceHawk request handlers - components documentation"
}</script>

	<meta name="generator" content="IceHawk Static Page Generator"/>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://icehawk.github.io/css/webfont.css">
	<link rel="stylesheet" href="https://icehawk.github.io/css/prism.css">
	<link rel="stylesheet" href="https://icehawk.github.io/css/main.css">
</head>
<body>

<div class="page-container">

	<!-- top navbar -->
	<a class="navbar-brand" href="/">
		<img alt="IceHawk" src="https://icehawk.github.io/images/logo_121x100.png">
	</a>
	<div id="top-navigation" role="navigation">
		<div class="container">
			<div class="left-nav">
				<h3 class="visible-xs visible-sm hidden-md hidden-lg">
					<a href="#" data-toggle="offcanvas" data-target=".sidebar-nav">
						<i class="fa fa-bars"></i>
					</a>
				</h3>
				<h1 class="h4 hidden-xs hidden-sm visible-md visible-lg">
					<span class="brand">IceHawk framework</span><br>
					<small>A micro-framework respecting CQRS - written for PHP 7</small>
				</h1>
			</div>
			<div class="right-nav text-right">
				<ul class="hidden-xs hidden-sm">
					<li>
						<a href="https://gitter.im/icehawk/Lobby?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge" target="_blank" title="Join our chat on Gitter">
							<img src="https://badges.gitter.im/icehawk/icehawk.svg" class="img-responsive">
						</a>
					</li>
					<li>
						<a href="https://github.com/icehawk/icehawk.github.io" target="_blank">
							Help us improve the docs
						</a>
					</li>
					<li>
						<a href="https://github.com/icehawk" target="_blank" title="Source code on github">
							<i class="fa fa-github"></i>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div id="top-fader"></div>

	<div class="container">

		<div class="row hidden-xs hidden-sm">

			<div class="col-md-12 col-lg-12">
				<ul class="breadcrumb hidden-xs hidden-sm">
											<li>
							<a href="https://icehawk.github.io/index.html">Home</a>
						</li>
											<li>
							<a href="https://icehawk.github.io/docs.html">Documentation</a>
						</li>
											<li>
							<a href="https://icehawk.github.io/docs/icehawk.html">IceHawk</a>
						</li>
											<li class="active">
							<a href="https://icehawk.github.io/docs/icehawk/request-handlers.html">Request handlers</a>
						</li>
									</ul>
			</div>

		</div>

		<div class="row row-offcanvas row-offcanvas-left">

			<!-- sidebar -->
			<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
				<ul class="nav">
					
								<li class="active">
		<a href="https://icehawk.github.io/docs.html">Documentation</a>
					<ul class="nav">
															<li class="active">
		<a href="https://icehawk.github.io/docs/icehawk.html">IceHawk</a>
					<ul class="nav">
															<li>
		<a href="https://icehawk.github.io/docs/icehawk/installation.html">Installation</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/configuration.html">Configuration</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/delegation.html">Delegation</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/routing.html">Routing</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/request-information.html">Request information</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/request-input-data.html">Request input data</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/uploaded-files.html">Uploaded files</a>
			</li>

											<li class="active">
		<a href="https://icehawk.github.io/docs/icehawk/request-handlers.html">Request handlers</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/auto-responding.html">Auto responding</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/events-and-subscribers.html">Events and subscribers</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/exceptions.html">Exceptions</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/final-responding.html">Final responding</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/icehawk/constants.html">Constants</a>
			</li>

							</ul>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/session.html">Session</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/forms.html">Forms</a>
			</li>

											<li>
		<a href="https://icehawk.github.io/docs/pubsub.html">PubSub</a>
			</li>

							</ul>
			</li>


					
								<li>
		<a href="https://icehawk.github.io/guides.html">Guides</a>
			</li>


					
								<li>
		<a href="https://icehawk.github.io/coverage.html">Code coverage</a>
			</li>


					
								<li>
		<a href="https://icehawk.github.io/metrics.html">Metrics</a>
			</li>


					
								<li>
		<a href="https://icehawk.github.io/media.html">Media</a>
			</li>


					
								<li>
		<a href="https://icehawk.github.io/imprint.html">Imprint</a>
			</li>


									</ul>
			</div>

			<!-- main area -->
			<div class="col-xs-12 col-sm-9" id="mainstage">

				<h1>IceHawk request handlers</h1>
<p>This section covers how to implement request handlers for the read and the write side.</p>
<hr class="blockspace">
<h2>Request handler interfaces</h2>
<p>In order to implement a request handler for the IceHawk component you need to implement one or more of
the following interfaces in your request handler class. These interfaces are more or less marker interfaces, all extending the base interfaces for
handling a read or a write request.</p>
<p>Every marker interface defines what request method(s) are allowed for the implementing request handler class.
So there is no need to add a request method string or constant to every defined route.</p>
<p>This is the full inheritance listing of the request handler interfaces:</p>
<pre><code>- HandlesRequest (empty interface, may contain declarations in future releases)
  |
  |- HandlesReadRequest (defines the handle() method for read request handlers)
  |  |
  |  `- HandlesHeadRequest (marks a request handler to handle a HEAD request)
  |     |
  |     `- HandlesGetRequest (marks a request handler to handle a GET and a HEAD request)
  |
  `- HandlesWriteRequest (defines the handle() method for write request handlers)
     |
     |- HandlesPostRequest (marks a request handler to handle a POST request)
     |
     |- HandlesPutRequest (marks a request handler to handle a PUT request)
     |
     |- HandlesPatchRequest (marks a request handler to handle a PATCH request)
     |
     `- HandlesDeleteRequest (marks a request handler to handle a DELETE request)</code></pre>
<p>These marker interfaces also allow the IceHawk component to respond automatically to an <code>OPTIONS</code> request, as it just needs
to check for the implemented interfaces of the request handlers the requested URI was mapped to. Note that both, read and write side, are considered before responding an <code>OPTIONS</code> request.
So you can have the same URL allowing for example a <code>GET</code> request on the read side and a <code>POST</code> request on the write side. </p>
<p>You can read more about this in our <a href="https://icehawk.github.io/docs/icehawk/auto-responding.html">auto repsonding section</a>.</p>
<hr class="blockspace">
<h2>Read side request handlers</h2>
<p>For the read side HTTP offers only to verbs: <code>GET</code> and <code>HEAD</code>.
Where the <code>HEAD</code> request should be handled and responded to exectly the same as a <code>GET</code> request, except that the body is omitted in the response.</p>
<p>For this reason we decided to let <code>HandlesGetRequest</code> inherit from the <code>HandlesHeadRequest</code> interface. So if your request handler implements
<code>HandlesGetRequest</code> it can respond to both, <code>GET</code> and <code>HEAD</code> requests.</p>
<p>Implenenting a handler for <code>GET</code> requests is pretty easy though:</p>
<pre><code class="language-php">&lt;?php declare(strict_types=1);

namespace YourVendor\YourProject;

use IceHawk\IceHawk\Interfaces\HandlesGetRequest;
use IceHawk\IceHawk\Interfaces\ProvidesReadRequestData;

final class ShowHomepageRequestHandler implements HandlesGetRequest
{
    public function handle( ProvidesReadRequestData $request )
    {
        # Read some data and respond
    }
}</code></pre>
<p>As you can see the only contract for your request handler is to implement a handle method that gets passed the read request object. So the rest is up to you.</p>
<p>Another advantage of only implementing an interface instead of extending an abstract or base class is to have no dependencies to
base logic or any other framework-tied implementation. So you can easily write own abstract/base classes, if needed, without to worry about
inheritance / overwriting of framework code. <a href="https://icehawk.github.io/guides/dependency-injection.html">We discuss a use-case for abstract classes here.</a></p>
<p>For the sake of completeness, this is how a <code>HEAD</code>-only request handler is implemented:</p>
<pre><code class="language-php">&lt;?php declare(strict_types=1);

namespace YourVendor\YourProject;

use IceHawk\IceHawk\Interfaces\HandlesHeadRequest;
use IceHawk\IceHawk\Interfaces\ProvidesReadRequestData;

final class RessourceAvailableRequestHandler implements HandlesHeadRequest
{
    public function handle( ProvidesReadRequestData $request )
    {
        # Check for ressource existence and respond
    }
}</code></pre>
<hr class="blockspace">
<h2>Write side request handlers</h2>
<p>For the write side HTTP offers 4 verbs: <code>POST</code>, <code>PUT</code>, <code>PATCH</code> and <code>DELETE</code>. The most web applications use <code>PUT</code>/<code>PATCH</code>/<code>DELETE</code> very rarely or don't use them at all.
In most cases a remote write operation is represented by a <code>POST</code> request. Some webservers don't even support <code>PUT</code>, <code>PATCH</code> and <code>DELETE</code>.</p>
<p>Implementing a handler for each of the request methods is equal and as easy as the previous example for a <code>GET</code> request handler.</p>
<p>A <code>POST</code> request handler:</p>
<pre><code class="language-php">&lt;?php declare(strict_types=1);

namespace YourVendor\YourProject;

use IceHawk\IceHawk\Interfaces\HandlesPostRequest;
use IceHawk\IceHawk\Interfaces\ProvidesWriteRequestData;

final class PostNewCommentRequestHandler implements HandlesPostRequest
{
    public function handle( ProvidesWriteRequestData $request )
    {
        # Do some write actions here and respond
    }
}</code></pre>
<p>A <code>PUT</code> request handler:</p>
<pre><code class="language-php">&lt;?php declare(strict_types=1);

namespace YourVendor\YourProject;

use IceHawk\IceHawk\Interfaces\HandlesPutRequest;
use IceHawk\IceHawk\Interfaces\ProvidesWriteRequestData;

final class AddRessourceRequestHandler implements HandlesPutRequest
{
    public function handle( ProvidesWriteRequestData $request )
    {
        # Do some write actions here and respond
    }
}</code></pre>
<p>A <code>PATCH</code> request handler:</p>
<pre><code class="language-php">&lt;?php declare(strict_types=1);

namespace YourVendor\YourProject;

use IceHawk\IceHawk\Interfaces\HandlesPatchRequest;
use IceHawk\IceHawk\Interfaces\ProvidesWriteRequestData;

final class UpdateProfileRequestHandler implements HandlesPatchRequest
{
    public function handle( ProvidesWriteRequestData $request )
    {
        # Do some write actions here and respond
    }
}</code></pre>
<p>A <code>DELETE</code> request handler:</p>
<pre><code class="language-php">&lt;?php declare(strict_types=1);

namespace YourVendor\YourProject;

use IceHawk\IceHawk\Interfaces\HandlesDeleteRequest;
use IceHawk\IceHawk\Interfaces\ProvidesWriteRequestData;

final class UnsubscribeNewsletterRequestHandler implements HandlesDeleteRequest
{
    public function handle( ProvidesWriteRequestData $request )
    {
        # Do some write actions here and respond
    }
}</code></pre>
				<div id="footer" class="row small">
					<div class="col-xs-12 col-sm-12 col-md-3 text-center">
						<span class="text-muted">
							Generated with <a class="text-muted" href="https://github.com/icehawk/static-page-generator" target="_blank">
								IceHawk <abbr title="Static Page Generator">SPG</abbr>
							</a>
						</span>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-3 text-center">
						<i class="fa fa-github text-muted"></i>
						<a href="https://github.com/icehawk" class="text-muted" target="_blank">Source code on github</a>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-3 text-center">
						<i class="fa fa-comments-o text-muted"></i>
						<a href="https://gitter.im/icehawk/Lobby" class="text-muted" target="_blank">Chat with us on gitter</a>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-3 text-center">
						<i class="fa fa-exclamation-circle text-muted"></i>
						<a href="https://github.com/icehawk/icehawk.github.io/issues" class="text-muted" target="_blank">Report an issue</a>
					</div>
				</div>

			</div><!-- /.col-xs-12 main -->
		</div><!--/.row-->
	</div><!--/.container-->

	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://use.fontawesome.com/2add9a8fb5.js" async="async"></script>
	<script type="text/javascript" src="https://icehawk.github.io/js/prism.js" async="async"></script>
	<script type="text/javascript" src="https://icehawk.github.io/js/main.js" async="async"></script>
	
</div><!--/.page-container-->
</body>
</html>
